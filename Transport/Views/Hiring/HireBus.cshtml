@model HireDetailsViewModel
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Hire a Bus</title>
    <!-- Bootstrap -->
    <link href="~/landingPage/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Magnific -->
    <link href="~/landingPage/css/magnific-popup.css" rel="stylesheet" type="text/css" />
    <!-- Icon -->
    <link href="~/landingPage/css/materialdesignicons.min.css" rel="stylesheet" type="text/css" />
    <link href="~/landingPage/css/pe-icon-7-stroke.css" rel="stylesheet" type="text/css" />
    <!-- SLICK SLIDER -->
    <link rel="stylesheet" href="~/landingPage/css/owl.carousel.min.css" />
    <link rel="stylesheet" href="~/landingPage/css/owl.theme.css" />
    <link rel="stylesheet" href="~/landingPage/css/owl.transitions.css" />
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="~/landingPage/css/swiper.min.css">
    <!-- Animation -->
    <link rel="stylesheet" href="~/landingPage/css/aos.css">
    <!-- Custom Css -->
    <link href="~/landingPage/css/style.css" rel="stylesheet" type="text/css" />
</head>
<body>

    <!-- Navbar Start -->
    <nav class="navbar navbar-expand-lg fixed-top navbar-custom navbar " style="background-color:forestgreen">
        <div class="container">
            <a class="navbar-brand" style="color:black">
                <!-- Applock -->
                <img src="~/Images/knustLogo.png" class="l-dark" height="50" alt="">
                <img src="~/Images/knustLogo.png" class="l-light" height="50" alt=""><strong style="color:black"> Transport</strong>
            </a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="mdi mdi-menu"></span>
            </button><!--end button-->

        </div><!--end container-->
    </nav><!--end navbar-->
    <!-- Navbar End -->
    <!-- HOME START-->
    <!-- Feature Start -->
    <section class="section bg-light">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <div class="section-title text-center">
                        <i class="mdi mdi-trophy-outline text-custom h2"></i>
                        <h4 class="title text-uppercase mt-3 mb-5">Hire A Bus</h4>
                    </div>
                </div><!--end col-->
            </div><!--end row-->

            <div class="">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title align-center" style="text-align:center">Bus Hiring Registration Form</h4>
                    </div>
                    <div class="card-content collapse show">
                        <div class="card-body">

                            <form class="form" id="SubmitHireForm" method="post" asp-action="HireBus" asp-controller="Hiring">
                                <div class="row justify-content-md-center">
                                    <div class="col-md-6">
                                        <div class="form-body">
                                            <h6>Hirer Information</h6>
                                            <div class="form-group">
                                                <label>Organisation Name  </label>
                                                <input type="text" asp-for="OrganisationName" class="form-control" placeholder="eg. Nestle Ghana">
                                            </div>
                                            <div class="form-group">
                                                <label>Contact Full Name <span class="text-danger">*</span> </label>
                                                <input type="text" asp-for="ContactName" class="form-control" placeholder="Full Name">
                                                <span asp-validation-for="ContactName"></span>
                                            </div>
                                            <div class="form-group">
                                                <label>Postal Address </label>
                                                <input type="text" asp-for="PostalAddress" class="form-control" placeholder="Postal Address">
                                            </div>
                                            <div class="form-group">
                                                <label>Email <span class="text-danger">*</span></label>
                                                <input type="email" asp-for="Email" class="form-control" placeholder="Email">
                                                <span asp-validation-for="Email"></span>
                                            </div>
                                            <div class="form-group">
                                                <label>Primary Phone Number <span class="text-danger">*</span></label>
                                                <input type="tel" asp-for="PrimaryContactNumber" class="form-control" placeholder="(+233)123456789">
                                                <span asp-validation-for="PrimaryContactNumber"></span>

                                            </div>
                                            <div class="form-group">
                                                <label>Other Phone Number</label>
                                                <input type="tel" asp-for="OtherContactNumber" class="form-control" placeholder="(+233)123456789">
                                            </div>


                                        </div>
                                    </div>

                                    <input id="DistanceCalculated" asp-for="DistanceCalculatedFromOrigin" hidden  />

                                    <div class="col-md-6">
                                        <div class="form-body">
                                            <h6>Hire Details</h6>
                                            <div class="row">
                                                <div class="form-group col-sm-6">
                                                    <label>Journey Start Date <span class="text-danger">*</span> </label>
                                                    <input type="date" asp-for="StartDate" class="form-control" placeholder="start date">
                                                    <span asp-validation-for="StartDate"></span>
                                                </div>
                                                <div class="form-group col-sm-6">
                                                    <label>Journey Start Time <span class="text-danger">*</span> </label>
                                                    <input type="time" asp-for="StartTime" class="form-control" placeholder="start time">
                                                    <span asp-validation-for="StartTime"></span>

                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-sm-6">
                                                    <label>Journey Finish Date <span class="text-danger">*</span> </label>
                                                    <input type="date" asp-for="FinishDate" class="form-control" placeholder="Return date">
                                                    <span asp-validation-for="FinishDate"></span>
                                                </div>
                                                <div class="form-group col-sm-6">
                                                    <label>Journey Finish Time <span class="text-danger">*</span> </label>
                                                    <input type="time" asp-for="FinishTime" class="form-control" placeholder="Return time">
                                                    <span asp-validation-for="FinishTime"></span>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-sm-6">
                                                    <label>Type Of Vehicle <span class="text-danger">*</span></label>
                                                    <select class="form-control " asp-items="@Model.vehicleTypeForHire" asp-for="VehicleTypeForHireId" placeholder="Type of Vehicle">
                                                        <option>Select Type of Vehicle</option>
                                                    </select>
                                                    <span asp-validation-for="VehicleTypeForHireId"></span>
                                                </div>
                                                <div class="form-group col-sm-6">
                                                    <label>No. of Bus(es) needed <span class="text-danger">*</span> </label>
                                                    <input type="number" asp-for="NoOfBusses" class="form-control" min="1" placeholder="eg. 1">
                                                    <span asp-validation-for="NoOfBusses"></span>
                                                </div>
                                            </div>
                                            <div class="row">
                                                <div class="form-group col-sm-6">
                                                    <label>Number of Passengers <span class="text-danger">*</span> </label>
                                                    <input type="number" asp-for="NoOfPassangers" class="form-control" placeholder="eg. 30">
                                                    <span asp-validation-for="NoOfPassangers"></span>
                                                </div>
                                                <div class="form-group col-sm-6">
                                                    <label>Destination <span class="text-danger">*</span> </label>
                                                    <input type="text" id="Destination" asp-for="Destination" class="form-control" placeholder="eg. Kakum National Park">
                                                    <span asp-validation-for="Destination"></span>
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label>Purpose of Hire? <span class="text-danger">*</span></label>
                                                <textarea type="text" class="form-control " asp-for="PurposeOfHire" placeholder="eg. FieldTrip, chilling"></textarea>
                                                <span asp-validation-for="PurposeOfHire"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-actions center">
                                    <button type="button" class="btn btn-warning mr-1">
                                        <i class="ft-x"></i> Cancel
                                    </button>
                                    <button  id="SubmitForm" class="btn btn-primary">
                                        <i class="la la-check-square-o"></i> Hire Bus
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

            </div><!--end row-->
        </div><!--end container-->
    </section><!--end section-->
    <!-- Feature End -->




    <script src="~/landingPage/js/jquery.min.js"></script>
    <script src="~/landingPage/js/bootstrap.bundle.min.js"></script>
    <script src="~/landingPage/js/jquery.easing.min.js"></script>
    <script src="~/landingPage/js/scrollspy.min.js"></script>
    <!-- SLIDER -->
    <script src="~/landingPage/js/owl.carousel.min.js "></script>
    <!-- Magnific Popup -->
    <script src="~/landingPage/js/jquery.magnific-popup.min.js"></script>
    <!-- Contact -->
    <script src="~/landingPage/js/contact.js"></script>
    <!-- Counter -->
    <script src="~/landingPage/js/counter.init.js"></script>
    <!-- Swiper JS -->
    <script src="~/landingPage/js/swiper.min.js"></script>
    <!-- Animation JS -->
    <script src="~/landingPage/js/aos.js"></script>
    <!-- Typed -->
    <script src="~/landingPage/js/typed.js"></script>
    <script src="~/landingPage/js/typed.init.js"></script>
    <!-- Animation JS -->
    <script src="~/landingPage/js/jquery.nicescroll.js"></script>
    <!-- Plugin init -->
    <script src="~/landingPage/js/plugin.init.js"></script>
    <!-- Main Js -->
    <script src="~/landingPage/js/app.js"></script>
    <script defer
            src="https://maps.googleapis.com/maps/api/js?libraries=places&language=en&key=AIzaSyCBIpaZoGDIQZ3_FlYEPw4EDZZgLsk6iL4"
            type="text/javascript">

    </script>

    <script>
        //Setting defualt origin
        var defaultOrigin = "KNUST, Kumasi, Ghana";

        $(function () {
            // add input listeners
            google.maps.event.addDomListener(window, "load", function () {
               
                var to_places = new google.maps.places.Autocomplete(
                    document.getElementById("Destination")
                );

                google.maps.event.addListener(
                    to_places,
                    "place_changed",
                    function () {
                        var to_place = to_places.getPlace();
                        var to_address = to_place.formatted_address;
                        $("#Destination").val(to_address);
                    }
                );
            });
            // calculate distance
            function calculateDistance() {
                //Setting defualt origin
                var defaultOrigin = "KNUST, Kumasi, Ghana";
                //Setting defualt origin
                var origin = defaultOrigin;
                var destination = $("#Destination").val();
                var service = new google.maps.DistanceMatrixService();
                service.getDistanceMatrix(
                    {
                        origins: [origin],
                        destinations: [destination],
                        travelMode: google.maps.TravelMode.DRIVING,
                        unitSystem: google.maps.UnitSystem.IMPERIAL, // miles and feet.
                        // unitSystem: google.maps.UnitSystem.metric, // kilometers and meters.
                        avoidHighways: false,
                        avoidTolls: false,
                    },
                    callback
                );
            }
            // get distance results
            function callback(response, status) {
                if (status != google.maps.DistanceMatrixStatus.OK) {
                    $("#result").html(err);
                } else {
                    var origin = response.originAddresses[0];
                    console.log(origin);
                    var destination = response.destinationAddresses[0];
                    console.log(destination);
                    if (response.rows[0].elements[0].status === "ZERO_RESULTS") {
                        $("#result").html(
                            "Better get on a plane. There are no roads between " +
                            origin +
                            " and " +
                            destination
                        );
                    } else {
                        var distance = response.rows[0].elements[0].distance;
                        console.log(distance);
                        var duration = response.rows[0].elements[0].duration;
                        console.log(duration);
                        console.log(response.rows[0].elements[0].distance);
                        var distance_in_kilo = distance.value / 1000; // the kilom
                        var distance_in_mile = distance.value / 1609.34; // the mile
                        console.log(distance_in_kilo,"in kilo");
                        document.getElementById("DistanceCalculated").value = 354 ;
                        /////////////////////////////FINAL FORM SUBMISSION..............////////
                        $("#SubmitHireForm").submit();
                        /////////////////////////////FINAL FORM SUBMISSION..............////////

                    }
                }
            }
            // print results on submit the form
            $("#SubmitForm").click(function (e) {
                e.preventDefault();
                calculateDistance();
            });
        });
        
    </script>
</body>
</html>
