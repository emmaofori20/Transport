@model UpdateVehicleViewModel

@{
    ViewBag.Title = "Update Vehicle";
}
<!-- BEGIN VENDOR CSS-->
<link rel="stylesheet" type="text/css" href="~/app-assets/css/vendors.css">
<link rel="stylesheet" type="text/css" href="~/app-assets/vendors/css/pickers/daterange/daterangepicker.css">
<link href="~/lib/bootstrap-datepicker/css/bootstrap-datepicker.css" rel="stylesheet" />
<!-- END VENDOR CSS-->
<!-- BEGIN MODERN CSS-->
<link rel="stylesheet" type="text/css" href="~/app-assets/css/app.css">
<!-- END MODERN CSS-->
<!-- BEGIN Page Level CSS-->
<link rel="stylesheet" type="text/css" href="~/app-assets/css/core/menu/menu-types/vertical-menu-modern.css">
<link rel="stylesheet" type="text/css" href="~/app-assets/css/core/colors/palette-gradient.css">
<link rel="stylesheet" type="text/css" href="~/app-assets/css/plugins/forms/wizard.css">
<link rel="stylesheet" type="text/css" href="~/app-assets/css/plugins/pickers/daterange/daterange.css">
<!-- END Page Level CSS-->
<!-- BEGIN Custom CSS-->
<link rel="stylesheet" type="text/css" href="~/assets/css/style.css">
<!-- END Custom CSS-->

<div>
    <div class="content-header row">
        <div class="content-header-left col-md-6 col-12 mb-2 breadcrumb-new">
            <h3 class="content-header-title mb-0 d-inline-block">Update Vehicle</h3>

        </div>
    </div>
    <!-- Form wizard with icon tabs section start -->
    <section id="icon-tabs">
        <div class="row">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h4 class="card-title">Registration Particulars</h4>
                        <a class="heading-elements-toggle"><i class="la la-ellipsis-h font-medium-3"></i></a>

                    </div>
                    <div class="card-content collapse show">
                        <div class="card-body">
                            <form method="post" enctype="multipart/form-data" asp-action="UpdateVehicle" asp-controller="Vehicle" asp-route-Id="@Model.VehicleId" id="my_Form" class="steps-validation wizard-circle">
                                <!-- Step 1 -->
                                <h6><i class="step-icon la la-folder"></i>Step 1</h6>
                                <fieldset>
                                    <input type="hidden" asp-for="VehicleId" class="form-control" />
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label asp-for="@Model.RegistrationNumber">Vehicle Registration Number :</label>
                                                <span class="danger">*</span>
                                                <input type="text" class="form-control required" asp-for="RegistrationNumber">

                                            </div>

                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label asp-for="@Model.OldRegistrationNumber">Vehicle Registration Number(Old) :</label>
                                                <input type="text" class="form-control" asp-for="OldRegistrationNumber">
                                            </div>

                                        </div>

                                    </div>

                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label asp-for="@Model.Owner">Owner :</label>
                                                <span class="danger">*</span>
                                                <input type="text" class="form-control required" asp-for="@Model.Owner">
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label for="">Use of Vehicle :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.VehicleUseId" asp-items="ViewBag.UseOfVehicle">
                                                    <option value="">Private/Commercial...</option>
                                                </select>

                                            </div>
                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Postal Address :</label>
                                                <span class="danger">*</span>
                                                <input type="text" class="form-control required" asp-for="PostalAddress">
                                            </div>
                                        </div>

                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Residential Address :</label>
                                                <input type="text" class="form-control" asp-for="ResidentialAddress">

                                            </div>

                                        </div>

                                    </div>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label asp-for="@Model.CollegeId">College/Unit :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" id="selectCollege" asp-for="@Model.CollegeId" asp-items="ViewBag.Colleges">
                                                    <option value="">Select College...</option>

                                                </select>
                                                <span asp-validation-for="CollegeId" class="text-danger"></span>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Department/Unit :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" id="departmentList" asp-for="@Model.DepartmentId" asp-items="ViewBag.Departments">
                                                    <option value="">Select Department...</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>


                                </fieldset>
                                <!-- Step 2 -->
                                <h6><i class="step-icon la la-bus"></i>Step 2</h6>
                                <fieldset>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label asp-for="@Model.MakeId">Make of Vehicle :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" id="selectMake" asp-for="@Model.MakeId" asp-items="ViewBag.Makes">
                                                    <option value="">Select Make...</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label asp-for="@Model.ModelId">Model of Vehicle :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" id="update-modelList" asp-for="@Model.ModelId" asp-items="ViewBag.Models">
                                                    @*<option value="">Select M...</option>*@
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label asp-for="@Model.VehicleTypeId">Type :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.VehicleTypeId" asp-items="ViewBag.VehicleTypes">
                                                    <option value="">Select Vehicle Type...</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Additional Description :</label>
                                                <textarea asp-for="@Model.Description" class="form-control" placeholder="Brief description of vehicle..."></textarea>

                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label asp-for="@Model.ColourId">Colour :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.ColourId" asp-items="ViewBag.Colours">
                                                    <option value="">Select Vehicle Colour...</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Insurance Policy :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.InsuranceId" asp-items="ViewBag.Insurances">
                                                    <option value="">Select Policy...</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Policy Number :</label>
                                                <span class="danger">*</span>
                                                <input type="text" class="form-control required" asp-for="@Model.PolicyNumber">
                                            </div>
                                            <div class="form-group">
                                                <label>Vehicle Status :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.StatusId" asp-items="ViewBag.Statuses">
                                                    <option value="">Select Status...</option>
                                                </select>
                                            </div>

                                        </div>
                                    </div>
                                </fieldset>
                                <!-- Step 3 -->
                                <h6><i class="step-icon la la-cogs"></i>Step 3</h6>
                                <fieldset>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Chasis Number :</label>
                                                <span class="danger">*</span>
                                                <input type="text" class="form-control required" asp-for="ChasisNumber">
                                            </div>
                                            <div class="form-group">
                                                <label>Country of Origin :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.CountryId" asp-items="ViewBag.Countries">
                                                    <option value="">Select Country...</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Year of Manufacture :</label>
                                                <span class="danger">*</span>
                                                <input type="number" class="form-control required" id="datepicker" asp-for="YearOfManufacture">
                                            </div>
                                            <div class="form-group">
                                                <label>Number of Axles :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.AxleCount" asp-items="ViewBag.Quantities">
                                                    <option value="">Select Value...</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Number of Wheels :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.WheelCount" asp-items="ViewBag.Quantities">
                                                    <option value="">Select Value...</option>
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-6">
                                            <span class="font-weight-normal">Measurements (cm) :</span> <br /><br />
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <input type="number" class="form-control" asp-for="Length" placeholder="Length">
                                                </div>
                                                <div class="col-md-4">
                                                    <input type="number" class="form-control" asp-for="Width" placeholder="Width">
                                                </div>
                                                <div class="col-md-4">
                                                    <input type="number" class="form-control" asp-for="Height" placeholder="Height">
                                                </div>
                                            </div><br />
                                            <span class="font-weight-normal">Sizes of Tyres :</span>
                                            <span class="danger">*</span>
                                            <br />
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <select class="custom-select form-control required" asp-for="@Model.FrontTyreSize" asp-items="ViewBag.TyreSizes">
                                                        <option value="">Front Tyre...</option>
                                                    </select>

                                                </div>
                                                <div class="col-md-4">
                                                    <select class="custom-select form-control" asp-for="@Model.MiddleTyreSize" asp-items="ViewBag.TyreSizes">
                                                        <option value="">Middle Tyre(Optional)...</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-4">
                                                    <select class="custom-select form-control required" asp-for="@Model.RearTyreSize" asp-items="ViewBag.TyreSizes">
                                                        <option value="">Rear Tyre...</option>
                                                    </select>
                                                </div>
                                            </div><br />
                                            <span class="font-weight-normal">Perm.Axle Load (kg) :</span> <br />
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <select class="custom-select form-control" asp-for="@Model.FrontPermAxleLoad" asp-items="ViewBag.PermAxleLoads">
                                                        <option value="">Select for Front...</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-4">
                                                    <select class="custom-select form-control" asp-for="@Model.MiddlePermAxleLoad" asp-items="ViewBag.PermAxleLoads">
                                                        <option value="">Select for Middle...</option>
                                                    </select>
                                                </div>
                                                <div class="col-md-4">
                                                    <select class="custom-select form-control" asp-for="@Model.RearPermAxleLoad" asp-items="@ViewBag.PermAxleLoads">
                                                        <option value="">Select for Rear...</option>
                                                    </select>
                                                </div>
                                            </div><br />
                                            <span class="font-weight-normal">Weight (kg) :</span> <br />
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <input type="number" class="form-control" asp-for="NetVehicleWeight" placeholder="NVM">
                                                </div>
                                                <div class="col-md-4">
                                                    <input type="number" class="form-control" asp-for="GrossVehicleWeight" placeholder="GVM">
                                                </div>
                                            </div><br />
                                            <span class="font-weight-normal">Perm. Capacity :</span> <br />
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <input type="number" class="form-control" asp-for="PermCapacityLoad" placeholder="Load(kg)">
                                                </div>
                                                <div class="col-md-4">
                                                    <input type="number" class="form-control" asp-for="Mileage" placeholder="Mileage">
                                                </div>
                                                <div class="col-md-4">
                                                    <select class="custom-select form-control required" asp-for="@Model.PersonCount" asp-items="ViewBag.Quantities">
                                                        <option value="">Select Number of Persons...</option>
                                                    </select>

                                                </div>
                                            </div><br />
                                        </div>
                                    </div>
                                </fieldset>
                                <!-- Step 4 -->
                                <h6><i class="step-icon la la-image"></i>Step 4</h6>
                                <fieldset>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label>Make of Engine :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.MakeId" asp-items="ViewBag.Makes">
                                                    <option value="">Select Make...</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Engine Number :</label>
                                                <span class="danger">*</span>
                                                <input type="text" class="form-control required" asp-for="EngineNumber">
                                            </div>
                                            <div class="form-group">
                                                <label>Number of Cylinders :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.CylinderCount" asp-items="ViewBag.Quantities">
                                                    <option value="">Select Number of Cylinders...</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label>Transmission Type :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.TransmissionTypeId" asp-items="ViewBag.TransmissionTypes">
                                                    <option value="">Select Transmission Type...</option>
                                                </select>
                                            </div>

                                        </div>

                                        <div class="col-md-6">
                                            <div class="form-group">
                                                <label asp-for="EngineCapacity">CC :</label>
                                                <span class="danger">*</span>
                                                <input type="number" class="form-control required" asp-for="EngineCapacity">
                                            </div>
                                            <div class="form-group">
                                                <label asp-for="HorsePower">Horse Power :</label>
                                                <input type="number" class="form-control" asp-for="HorsePower">
                                            </div>
                                            <div class="form-group">
                                                <label asp-for="@Model.FuelTypeId">Type of Fuel :</label>
                                                <span class="danger">*</span>
                                                <select class="custom-select form-control required" asp-for="@Model.FuelTypeId" asp-items="ViewBag.FuelTypes">
                                                    <option value="">Select Type of Fuel...</option>
                                                </select>
                                                <div class="form-group">
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                <label asp-for="DateOfEntry">Date of Entry :</label>
                                                <input type="date" class="form-control required" asp-for="DateOfEntry">
                                            </div>
                                        </div>
                                        <div class="row">
                                            @{
                                                var photosectionselectlist = new SelectList(ViewBag.PhotoSections, "PhotoSectionId", "PhotoSectionName");

                                            }
                                            @for (int i = 0; i <= Model.PhotoItems.Count() - 1; i++)
                                            {

                                                <div class="col-md-3">
                                                    <div id="preview" class="text-center" style="max-width: 100%; max-height: 100% ">
                                                        <img src="data:image;base64,@Convert.ToBase64String(Model.PhotoItems[i].PhotoByte)" id="preview-@i" class="img-fluid" style="height: 150px" alt="">
                                                    </div>
                                                    <div class="form-group">
                                                        <input asp-for="@Model.PhotoItems[i].PhotoFile" class="img-input" data-preview-item="preview-@i" type="file" />
                                                        <label>Photo Section :</label>
                                                        <span class="danger">*</span>
                                                        <input class="form-control" value="@Model.PhotoItems[i].PhotoSectionName" disabled />
                                                        <select class="custom-select form-control required" asp-for="@Model.PhotoItems[i].PhotoSectionId" asp-items="photosectionselectlist" hidden>
                                                        </select>
                                                    </div>
                                                </div>

                                            }
                                        </div>
                                    </div>
                                </fieldset>
                            </form>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Form wizard with icon tabs section end -->
</div>


@* Scripts *@

<!-- BEGIN VENDOR JS-->
<script src="~/app-assets/vendors/js/vendors.min.js" type="text/javascript"></script>
<!-- BEGIN VENDOR JS-->
<!-- BEGIN PAGE VENDOR JS-->
<script src="~/app-assets/vendors/js/extensions/jquery.steps.min.js" type="text/javascript"></script>
<script src="~/app-assets/vendors/js/ui/prism.min.js" type="text/javascript"></script>
<script src="~/app-assets/vendors/js/pickers/dateTime/moment-with-locales.min.js"
        type="text/javascript"></script>
<script src="~/app-assets/vendors/js/pickers/daterange/daterangepicker.js"
        type="text/javascript"></script>
<script src="~/app-assets/vendors/js/forms/validation/jquery.validate.min.js"
        type="text/javascript"></script>

<!-- END PAGE VENDOR JS-->
<!-- BEGIN PAGE LEVEL JS-->
<script src="~/app-assets/js/scripts/forms/wizard-steps.js" type="text/javascript"></script>
<script src="~/lib/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
<!-- END PAGE LEVEL JS-->

<script>
    $("#datepicker").datepicker({
        format: "yyyy",
        viewMode: "years",
        minViewMode: "years",
        autoclose: true //to close picker once year is selected
    });
</script>



<script>
    function readURL(input) {

        var previewitem = $(input).attr('data-preview-item');
        //console.log(previewitem);
        //console.log(input.files[0]);

        if (input.files && input.files[0]) {
            var reader = new FileReader();
            reader.onload = function (e) {
                $('#' + previewitem).attr('src', e.target.result);
            }
            reader.readAsDataURL(input.files[0]);
        } else {
            $('#preview').attr('src', '');
        }
    }

    $(".img-input").change(function () {

        readURL(this);
    });

      $("#selectMake").on("change", function () {
        let makeId = $(this).val();

        $.ajax(
            {
                url: '@Url.Action("GetModelsByMake")',
                data: { MakeId: makeId },
                cache: false,
                type: "GET",
                success: function (data) {
                    /*console.log(data);*/
                    var markup = "<option value = '0' > Select Model...</option> ";
                    for (var i = 0; i < data.length; i++) {
                        markup += "<option value=" + data[i].value + ">" + data[i].text + "</option>";
                    }
                    console.log(markup);
                    $('#update-modelList').html(markup).show();
                },
                error: function (response) {
                    alert("error: " + response);
                }
            });
    });


</script>
<script>
    $("#selectCollege").on("change", function () {
        let collegeId = $(this).val();

        $.ajax(
            {
                url: '@Url.Action("GetDepartmentsByCollege")',
                data: { CollegeId: collegeId },
                cache: false,
                type: "GET",
                success: function (data) {
                    console.log(data);
                    var markup = "<option value = '0' > Select Department...</option> ";
                    for (var i = 0; i < data.length; i++) {
                        markup += "<option value=" + data[i].value + ">" + data[i].text + "</option>";
                    }
                    console.log(markup);
                    $('#departmentList').html(markup).show();
                },
                error: function (response) {
                   console.log(response,status);
                }
            });
    });
</script>
