@model VehicleMaintenanceRequestDetailsViewModel

@{
    ViewBag.Title = "Details";

    int Id = (int)ViewData["RequestListId"];

}

<link rel="stylesheet" type="text/css" href="~/app-assets/vendors/css/ui/prism.min.css">
<link rel="stylesheet" type="text/css" href="~/app-assets/vendors/css/file-uploaders/dropzone.min.css">
<link rel="stylesheet" type="text/css" href="~/app-assets/css/plugins/file-uploaders/dropzone.css">


<div class="content-body">
    <section class="card">
        <div id="invoice-template" class="card-body">
            <!-- Invoice Company Details -->
            <div id="invoice-company-details" class="row">
                <div class="col-md-6 col-sm-12 text-center text-md-left">
                    <div class="media">
                        <img src="~/app-assets/images/logo/bus.png" alt="company logo" style="height:70px;width:70px" class="" />
                        <div class="media-body">
                            <ul class="ml-2 px-0 list-unstyled">
                                <li class="text-bold-800">KNUST TRANSPORT UNIT</li>
                                <li>KUMASI,ASHANTI REGION</li>
                                <li>Ghana</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 col-sm-12 text-center text-md-right">
                    <h2>INVOICE</h2>
                    <p class="pb-3"># INV-@Id-@Model.spareParts.Count</p>
                    @*<ul class="px-0 list-unstyled">
                    <li>Maintenanance Cost</li>
                    <li class="lead text-bold-800">Ghc @Model.MaintenanceCost</li>
                </ul>*@
                </div>
            </div>
            <!--/ Invoice Company Details -->
            <!-- Invoice Customer Details -->
            <div id="invoice-customer-details" class="row pt-2">
                <div class="col-sm-12 text-center text-md-left">
                    <p class="text-muted">Maintaned By</p>
                </div>
                <div class="col-md-6 col-sm-12 text-center text-md-left">
                    <ul class="px-0 list-unstyled">
                        <li class="text-bold-800">@Model.MaintainedBy</li>
                    </ul>
                </div>
                <div class="col-md-6 col-sm-12 text-center text-md-right">
                    <p>
                        <span class="text-muted">Invoice Date :</span> @Model.Date
                    </p>
                    <p>
                        <span class="text-muted">VehicleNumber :</span> @Model.RegistrationNumber
                    </p>
                    <p>
                        <span class="text-muted">Request Status :</span> <h6 class="text-bold-600">@Model.Status</h6>
                    </p>

                </div>
            </div>
            <!--/ Invoice Customer Details -->
            <!-- Invoice Items Details -->
            <div id="invoice-items-details" class="pt-2">
                <div class="row">
                    <div class="table-responsive col-sm-12">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Item </th>
                                    <th class="text-right">Quantity</th>
                                    <th class="text-right">Amount</th>
                                </tr>
                            </thead>
                            <tbody>
                                @for (int i = 0; i < @Model.spareParts.Count; i++)
                                {
                                    <tr>
                                        <th scope="row">@i+1 </th>
                                        <td>
                                            <p>@Model.spareParts[i].SparePartName</p>
                                        </td>
                                        <td class="text-right">@Model.spareParts[i].Quantity</td>
                                        <td class="text-right">Ghc @Model.spareParts[i].Amount</td>
                                    </tr>
                                }


                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="row">

                    <div class="col-md-5 col-sm-12">
                        <p class="lead ">Total Amount: <span class=" text-bold-800">Ghc @Model.spareParts.Sum(c => c.Amount * c.Quantity)  </span>  </p>
                    </div>
                </div>
            </div>
            <!-- Invoice Footer -->
            <div id="invoice-footer">
                <div class="row">
                    <div class="col-md-7 col-sm-12">
                        <h6>Terms & Condition</h6>
                        <p>
                            You know, being a test pilot isn't always the healthiest business
                            in the world. We predict too much for the next year and yet far
                            too little for the next 10.
                        </p>
                    </div>
                    <div class="col-md-5 col-sm-12 text-center">
                        <button type="button" class="btn btn-info btn-lg my-1"><i class="la la-paper-plane-o"></i> Print Invoice</button>
                    </div>
                </div>
            </div>
            <!--/ Invoice Footer -->
            <!--Upload Receipts or Images-->
            @if (@Model.Status == "Pending")
            {

            }
            else
            {
                <div class="row">
                    <div class="col-12">
                        <div class="card">

                            <div class="card-content collapse show">
                                <div class="card-body">
                                    <p class="card-text" style="text-align:center; font-size:23px">
                                        Upload receipts or pictures of the spare parts
                                    </p>
                                    <form action="#" class="dropzone dropzone-area" id="dpz-multiple-files">
                                        <div class="dz-message">Drop Files Here To Upload</div>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            }
        </div>
    </section>
</div>


<script src="~/app-assets/vendors/js/extensions/dropzone.min.js" type="text/javascript" defer></script>
<script src="~/app-assets/vendors/js/ui/prism.min.js" type="text/javascript"></script>
<script src="~/app-assets/js/scripts/extensions/dropzone.js" type="text/javascript"></script>

<script>
    var myDropzone = new Dropzone("dpz-multiple-files", {
        url: "/file/post",
        uploadMultiple: true, maxFiles: 10
    });

    myDropzone.on("maxfilesexceeded", function (file) {
        myDropzone.removeAllFiles();
        myDropzone.addFile(file);
    });
</script>